# Strapi CMS Content Types

## Overview

This document describes the content types that need to be configured in Strapi CMS.

## Product Content Type

### Fields

| Field Name | Type | Required | Description |
|------------|------|----------|-------------|
| `id` | Number | Auto | Auto-generated ID |
| `name` | Text (Multi-language) | Yes | Product name (Italian, English) |
| `description` | Rich Text (Multi-language) | Yes | Product description |
| `category` | Relation (Category) | Yes | Product category |
| `subCategory` | Enum | Yes | Niche or Commercial |
| `brand` | Text | No | Product brand name |
| `price` | Number | Yes | Product price |
| `currency` | Text | Yes | Currency code (default: EUR) |
| `sku` | Text | Yes | Stock Keeping Unit |
| `barcode` | Text | No | Barcode/EAN code |
| `images` | Media (Multiple) | No | Product images (gallery support) |
| `variants` | Component (ProductVariant) | No | Product variants (size, scent profile) |
| `createdAt` | DateTime | Auto | Creation timestamp |
| `updatedAt` | DateTime | Auto | Update timestamp |
| `publishedAt` | DateTime | Auto | Publication timestamp |

### Enum Values

**subCategory:**
- `Niche` - Niche fragrance
- `Commercial` - Commercial fragrance

### Multi-language Configuration

Configure Italian (it) and English (en) locales:
- `name` - Text field with i18n enabled
- `description` - Rich text field with i18n enabled

### Relations

- **Category**: Many-to-One relation with Category content type
- **Variants**: One-to-Many relation with ProductVariant component

### Product Variant Component

Product variants allow different sizes, scent profiles, and variant-specific pricing.

**Component Name:** `ProductVariant`

| Field Name | Type | Required | Description |
|------------|------|----------|-------------|
| `type` | Enum | Yes | Variant type: `size` or `scent-profile` |
| `value` | Text | Yes | Variant value (e.g., "50ml", "Floral") |
| `sku` | Text | Yes | Unique SKU for this variant |
| `price` | Number | No | Price override (if different from base product) |
| `currency` | Text | No | Currency for variant price (defaults to product currency) |
| `stockQuantity` | Number | No | Stock quantity for this variant |
| `images` | Media (Multiple) | No | Variant-specific images |

**Enum Values:**

**type:**
- `size` - Size variant (e.g., "30ml", "50ml", "100ml")
- `scent-profile` - Scent profile variant (e.g., "Floral", "Woody", "Citrus")

### Product Images Configuration

Product images support:
- **Multiple images per product** (gallery support)
- **2D and 3D assets** (via MIME type detection)
- **Primary image** (first image in array or explicitly marked)
- **Variant-specific images** (via ProductVariant component)
- **Image formats** (thumbnail, small, medium, large - auto-generated by Strapi)

**Media Library Settings:**
- Configure image upload settings in Settings → Media Library
- Recommended formats: JPEG, PNG, WebP
- 3D assets: GLB, GLTF (for 3D product views)
- Max file size: Configure based on hosting limits
- Image optimization: Enable automatic format conversion (WebP)

**Image Field Configuration:**
- Field type: Media (Multiple)
- Allow multiple files: Yes
- Allowed file types: Images, 3D models
- Max file size: As per hosting configuration

## Category Content Type

### Fields

| Field Name | Type | Required | Description |
|------------|------|----------|-------------|
| `id` | Number | Auto | Auto-generated ID |
| `name` | Text (Multi-language) | Yes | Category name (Italian, English) |
| `slug` | Text (Unique) | Yes | URL-friendly identifier |
| `description` | Text (Multi-language) | No | Category description |
| `createdAt` | DateTime | Auto | Creation timestamp |
| `updatedAt` | DateTime | Auto | Update timestamp |
| `publishedAt` | DateTime | Auto | Publication timestamp |

### Multi-language Configuration

Configure Italian (it) and English (en) locales:
- `name` - Text field with i18n enabled
- `description` - Text field with i18n enabled

### Validation

- `slug` must be unique
- `slug` should be URL-friendly (lowercase, hyphens)

## Setup Instructions

### 1. Enable Internationalization

1. Go to Settings → Internationalization
2. Add locales: Italian (it), English (en)
3. Set default locale: Italian (it)

### 2. Create Product Variant Component

1. Go to Content-Type Builder
2. Create new component: "ProductVariant"
3. Add fields as specified in "Product Variant Component" section above
4. Configure enum for `type` field (size, scent-profile)
5. Add `images` field as Media (Multiple)
6. Save component

### 3. Create Product Content Type

1. Go to Content-Type Builder
2. Create new collection type: "Product"
3. Add fields as specified above
4. Enable i18n for `name` and `description` fields
5. Configure relation to Category
6. Add `variants` field as Component (ProductVariant, Repeatable)
7. Configure `images` field as Media (Multiple) with proper settings
8. Save and publish

### 4. Create Category Content Type

1. Go to Content-Type Builder
2. Create new collection type: "Category"
3. Add fields as specified above
4. Enable i18n for `name` and `description` fields
5. Save and publish

### 5. Configure API Permissions

1. Go to Settings → Users & Permissions → Roles → Public
2. Enable `find` and `findOne` for Product
3. Enable `find` and `findOne` for Category
4. Save permissions

## API Usage Examples

### Fetch Products

```typescript
// Get all products with full data (using useProducts composable)
const { products, pending, error } = useProducts({
  page: 1,
  pageSize: 20,
  filters: { category: 'perfumes', subCategory: 'Niche' },
  locale: 'it'
})

// Get single product with full data (using useProduct composable)
const { product, pending, error } = useProduct(123, {
  locale: 'it'
})

// Search products (using useProductSearch composable)
const { products, pending, error } = useProductSearch({
  query: 'perfume',
  fields: ['name', 'description', 'sku', 'brand'],
  locale: 'it',
  limit: 20
})

// Direct Strapi API usage (lower level)
const { data: products } = useStrapi('products', {
  query: {
    populate: ['category', 'images', 'variants', 'variants.images'],
    locale: 'it'
  }
})
```

### Fetch Categories

```typescript
// Get all categories
const { data: categories } = useStrapi('categories', {
  query: {
    locale: 'it'
  }
})
```

## TypeScript Types

TypeScript types are defined in `types/strapi.d.ts`:

- `StrapiProduct` - Product content type
- `StrapiCategory` - Category content type

## Future Enhancements

- Additional content types (Blog, Pages, etc.)
- Custom fields and validations
- Content versioning
- Draft/publish workflow

